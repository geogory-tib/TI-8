#include <cstdlib>
#include <ti/screen.h>
#include <ti/getcsc.h>
#include <ti/getkey.h>
#include <fileioc.h>
#include "include/typedefs.h"
#include <debug.h>
extern void emu_main(byte *rom_buffer,i16 rom_size);

// file_buf[256];
byte ibm_ch8[] = {
  0x00, 0xe0, 0xa2, 0x2a, 0x60, 0x0c, 0x61, 0x08, 0xd0, 0x1f, 0x70, 0x09,
  0xa2, 0x39, 0xd0, 0x1f, 0xa2, 0x48, 0x70, 0x08, 0xd0, 0x1f, 0x70, 0x04,
  0xa2, 0x57, 0xd0, 0x1f, 0x70, 0x08, 0xa2, 0x66, 0xd0, 0x1f, 0x70, 0x08,
  0xa2, 0x75, 0xd0, 0x1f, 0x12, 0x28, 0xff, 0x00, 0xff, 0x00, 0x3c, 0x00,
  0x3c, 0x00, 0x3c, 0x00, 0x3c, 0x00, 0xff, 0x00, 0xff, 0xff, 0x00, 0xff,
  0x00, 0x38, 0x00, 0x3f, 0x00, 0x3f, 0x00, 0x38, 0x00, 0xff, 0x00, 0xff,
  0x80, 0x00, 0xe0, 0x00, 0xe0, 0x00, 0x80, 0x00, 0x80, 0x00, 0xe0, 0x00,
  0xe0, 0x00, 0x80, 0xf8, 0x00, 0xfc, 0x00, 0x3e, 0x00, 0x3f, 0x00, 0x3b,
  0x00, 0x39, 0x00, 0xf8, 0x00, 0xf8, 0x03, 0x00, 0x07, 0x00, 0x0f, 0x00,
  0xbf, 0x00, 0xfb, 0x00, 0xf3, 0x00, 0xe3, 0x00, 0x43, 0xe5, 0x05, 0xe2,
  0x00, 0x85, 0x07, 0x81, 0x01, 0x80, 0x02, 0x80, 0x07, 0xe1, 0x06, 0xe7
};
int main(void){
  dbg_Debugger();
  //int rom_handle = 0;
	// os_ClrHomeFull();
	// os_SetCursorPos(0,0);
	// os_GetStringInput("Type the path to a Rom File",file_buf, sizeof(file_buf));
	// rom_handle =  ti_Open(file_buf,"r");
	// if(rom_handle == 0){
	// 	os_ClrHomeFull();
	// 	os_SetCursorPos(0,0);
	// 	os_PutStrFull("Unable to open rom file press  any key to exit");
	// 	os_GetKey();
	// 	return -1;
	// }
  dbg_printf("INFO: ENTERING EMU_MAIN WITH IBM LOGO ROM");
  emu_main(ibm_ch8,sizeof(ibm_ch8));
  //ti_Close(rom_handle);
  return 0;
}    
